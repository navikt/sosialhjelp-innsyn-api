spring:
  main:
    banner-mode: 'off'
    allow-circular-references: true # b√∏r endres
  application:
    name: "sosialhjelp-innsyn-api"
  redis:
    host: ${REDIS_HOST}
    port: 6379
    password: ${REDIS_PASSWORD}
  session:
    store-type: redis

server:
  servlet:
    context-path: '/sosialhjelp/innsyn-api'
    session:
      cookie:
        name: sosialhjelp-innsyn-id
        path: /sosialhjelp
        secure: true
        max-age: 30M
        http-only: true
  max-http-header-size: 16KB


# Prometheus
management:
  endpoints:
    web:
      base-path: "/internal"
      exposure:
        include: info, health, metrics, prometheus

springdoc:
  api-docs:
    enabled: ${SWAGGER_ENABLED}
  swagger-ui:
    path: swagger-ui.html
  pathsToMatch: /**/api/v1/**

#Environment-variabler som settes av NAIS
client:
  fiks_digisos_endpoint_url: ${FIKS_DIGISOS_ENDPOINT_URL}
  fiks_dokumentlager_endpoint_url: ${FIKS_DOKUMENTLAGER_ENDPOINT_URL}
  fiks_svar_ut_endpoint_url: ${FIKS_SVAR_UT_ENDPOINT_URL}
  fiks_integrasjonid: ${INTEGRASJONSID_FIKS}
  fiks_integrasjonid_kommune: ${INTEGRASJONSID_FIKS_KOMMUNE}
  fiks_integrasjonpassord: ${INTEGRASJONPASSORD_FIKS}
  fiks_integrasjonpassord_kommune: ${INTEGRASJONPASSORD_FIKS_KOMMUNE}
  norg_endpoint_url: ${NORG_ENDPOINT_URL}
  pdl_endpoint_url: ${PDL_ENDPOINT_URL}
  sts_token_endpoint_url: ${STS_TOKEN_ENDPOINT_URL}
  unleash_url: ${UNLEASH_API_URL}
  unleash_instance_id: ${UNLEASH_INSTANCE_ID}
  meldinger_kommunenummer: ${MELDINGER_KOMMUNENUMMER}
  tokendings_url: ${TOKEN_X_WELL_KNOWN_URL}
  tokendings_client_id: ${TOKEN_X_CLIENT_ID}
  tokendings_private_jwk: ${TOKEN_X_PRIVATE_JWK}
  dialog_endpoint_url: ${DIALOG_ENDPOINT_URL}
  dialog_audience: ${DIALOG_AUDIENCE}

no.nav.sosialhjelp.idporten:
  token_url: ${ID_PORTEN_TOKEN_URL}
  client_id: ${ID_PORTEN_CLIENT_ID}
  scope: ${ID_PORTEN_SCOPE}
  config_url: ${ID_PORTEN_CONFIG_URL}

#Token-validering
no.nav.security.jwt:
  issuer.selvbetjening:
    discoveryurl: ${LOGINSERVICE_IDPORTEN_DISCOVERY_URL}
    cookie_name: selvbetjening-idtoken
    accepted_audience: ${LOGINSERVICE_IDPORTEN_AUDIENCE}
azuread.loginurl: ${AZUREAD_LOGINURL}

innsyn:
  vedlegg:
    virusscan:
      enabled: true
  cache:
    time_to_live_seconds: ${CACHE_TIME_TO_LIVE_SECONDS:10}
  retry:
    fiks:
      attempts: 5 # number of attempts
      initial_delay: 250 # initial delay in ms
      max_delay: 10000 # max delay in ms
